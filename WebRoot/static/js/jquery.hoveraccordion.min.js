/**
 * HoverAccordion - jQuery plugin for intuitively opening accordions and menus
 *
 * Copyright (c) 2008-2010 Bernd Matzner (http://matznermatzner.de/en/bernd)
 *
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Version: 0.9.2
 *
 * Requires jQuery 1.4.4 or higher
 */
(function($){"use strict";$.fn.hoverAccordion=function(opts){var options=jQuery.extend({speed:"fast",activateItem:true,keepHeight:false,onClickOnly:false,classActive:"active",classHeader:"header",classHover:"hover",classOpen:"opened",classClosed:"closed"},opts);var container=this;var pageHref=window.location.href;var i=0;var doHover=function(itemList,itemHeader,listHeight){var oldList=$(container).find("."+options.classOpen).closest("li").find("ul:first");if(false===oldList.is(":animated")){if(options.keepHeight===true){listHeight=maxHeight}if(itemHeader.hasClass(options.classOpen)===false){itemList.children().show();itemList.animate({height:listHeight},{step:function(n,fx){itemList.height(listHeight-n)},duration:options.speed});oldList.animate({height:0},{step:function(n,fx){itemList.height(listHeight-n)},duration:options.speed}).children().hide();itemHeader.addClass(options.classOpen).removeClass(options.classClosed);oldList.closest("li").removeClass(options.classActive).find("a:first").addClass(options.classClosed).removeClass(options.classOpen)}}};var itemNo=0;var maxHeight=0;$(this).children("li").each(function(){var item=$(this),isActive=false,itemHeader=item.find("a:first").addClass(options.classHeader),itemHref,itemList,listHeight;itemNo++;if(itemHeader.length>0){itemHeader.hover(function(){itemHeader.addClass(options.classHover)},function(){itemHeader.removeClass(options.classHover)});itemHref=itemHeader.attr("href");if(itemHref==="#"){itemHeader.click(function(){this.blur();return false})}else if(options.activateItem===true&&pageHref.indexOf(itemHref)>0&&pageHref.length-pageHref.lastIndexOf(itemHref)===itemHref.length){isActive=true;item.addClass(options.classActive);itemHeader.removeClass(options.classClosed).addClass(options.classOpen)}}itemList=item.find("ul:first");if(itemList.length>0){listHeight=itemList.height();if(maxHeight<listHeight){maxHeight=listHeight}if(options.onClickOnly===true){itemHeader.click(function(){doHover(itemList,itemHeader,listHeight)})}else{itemHeader.hover(function(){i=setInterval(function(){doHover(itemList,itemHeader,listHeight);clearInterval(i)},400)},function(){clearInterval(i)})}if(options.activateItem===true){itemList.children("li").each(function(){var m=$(this).find("a").attr("href");if(m){if(pageHref.indexOf(m)>0&&pageHref.length-pageHref.lastIndexOf(m)===m.length){isActive=true;item.addClass(options.classActive);itemHeader.removeClass(options.classClosed).addClass(options.classOpen)}}})}else if(parseInt(options.activateItem,10)===itemNo){isActive=true;item.addClass(options.classActive);itemHeader.removeClass(options.classClosed).addClass(options.classOpen)}}if(!isActive){itemHeader.removeClass(options.classOpen);if(itemList.length>0){itemList.children().hide();itemHeader.addClass(options.classClosed)}}});return this}})(jQuery);
